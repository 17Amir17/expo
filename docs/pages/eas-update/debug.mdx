---
title: Debug EAS Update
sidebar_title: Basic
description: Learn how to debug EAS Update.
---

import ImageSpotlight from '~/components/plugins/ImageSpotlight';
import { Terminal } from '~/ui/components/Snippet';

It's important to tell the current state of our app at any given time. We built EAS Update with this in mind. Once we know which updates are running on which builds, we can make changes so that our apps are in the state we expect and desire. This guide sets out to show how we can verify our EAS Update and expo-updates configuration so that we can find the source of problems like an app not showing a published update.

## `expo-updates` configuration

The `expo-updates` library runs inside an end-user's app and makes requests to an update server to get the latest update.

### Verifying app configuration

When we set up EAS Update, we likely ran `eas update:configure` to configure expo-updates to work with EAS Update. This command makes changes to our app config (**app.json**/**app.config.js**). Here are the fields we'd expect to see:

- `runtimeVersion` should be set. By default, it is `{ "policy": "sdkVersion" }`. If our project has **android** and **ios** directories, we'll have to set the `runtimeVersion` manually.
- `updates.url` should be a value like `https://u.expo.dev/your-project-id`, where `your-project-id` matches the ID of our project. We can see this ID on [our website](https://expo.dev/accounts/[account]/projects/[project]).
- `updates.enabled` should not be `false`. It's `true` by default if it is not specified.

Finally, make sure that `expo-updates` is included in **package.json**. If it's not, run:

<Terminal cmd={['$ npx expo install expo-updates']} />

### Inspecting expo-updates configuration after prebuild

Whenever we run `eas build`, the `npx expo prebuild` command is run on our project on EAS' servers to unpack the **android** and **ios** directories that contain native files. This makes it so EAS Build can build any project, whether it includes the native files or not.

If our project does not have **android** or **ios** directories, we can make commit any existing changes, then run `npx expo prebuild` to inspect the project state that EAS Build will act on. After running this, look for the following files: **android/app/src/main/AndroidManifest.xml** and **ios/your-project-name/Supporting/Expo.plist**.

In each, we expect to see configuration for the EAS Update URL and the runtime version. Here are the properties we'd expect to see in each file:

**AndroidManifest.xml**

```xml
...
<meta-data android:name="expo.modules.updates.EXPO_RUNTIME_VERSION" android:value="your-runtime-version-here"/>
<meta-data android:name="expo.modules.updates.EXPO_UPDATE_URL" android:value="https://u.expo.dev/your-project-id-here"/>
...
```

**Expo.plist**

```xml
...
<key>EXUpdatesRuntimeVersion</key>
<string>your-runtime-version-here</string>
<key>EXUpdatesURL</key>
<string>https://u.expo.dev/your-project-id-here</string>
...
```

## EAS Update configuration

To debug the state of EAS Update in our project, we'll need to look at multiple spots in the system. Below is a diagram of how EAS Update works and the spots that are useful to inspect when finding the root cause of an issue. In the sections following, we'll inspect and verify these spots and more.

<ImageSpotlight alt="Map of debugging spots" src="/static/images/eas-update/debug-map.png" />

### 1. Verify a channel

Builds have a property named `channel`, which EAS Update uses to link to a branch. A channel is often given to multiple platform-specific builds. For instance, we might have an Android build and an iOS build, both with a channel named `"production"`.

#### Configuring channels

To verify that a build has a specific channel, make sure that in **eas.json**, there is a channel property:

```json eas.json
{
  "build": {
    "preview": {
      "distribution": "internal",
      "channel": "preview"
    },
    "production": {
      "channel": "production"
    }
  }
}
```

Then, we can run a command like `eas build --profile preview` to create a build with a channel named "preview".

#### Inspecting channels on EAS

Once a build has a channel name, we can make sure that EAS' servers know about the channel by running the following commands:

<Terminal cmd={['$ eas channel:list']} />

or

<Terminal
  cmd={['# eas channel:view [channel-name]', '', '', '# Example', '$ eas channel:view production']}
/>

We'd expect the output of these commands to display the same channel name that our build has. If it's not there, we can create the channel on EAS' servers with:

<Terminal
  cmd={[
    '# eas channel:create [channel-name]',
    '',
    '',
    '# Example',
    'eas channel:create production',
  ]}
/>

### 2. Verify the channel/branch mapping

There is a link that is defined by the developer between a channel and a branch. When a channel and branch are linked, an app with a channel will get the most recent compatible update on the linked branch.

To verify which branch is linked to a channel, we can run:

<Terminal
  cmd={['# eas channel:view [channel-name]', '', '', '# Example', 'eas channel:view production']}
/>

If the channel is not linked to the branch we expect, we can change the link with:

<Terminal
  cmd={[
    '# eas channel:edit [channel-name] --branch [branch-name]',
    '',
    '',
    '# Example',
    'eas channel:edit production --branch release-1.0',
  ]}
/>

### 3. Verify the update

Every branch contains a list of updates. When a build makes a call for an update, we find the channel of the build, then the branch linked to that channel. Once the branch is found, EAS will return the most recent compatible update on that branch. A build and an update are compatible when they share the same runtime version and platform.

To inspect which updates are on a branch, we can run:

<Terminal
  cmd={['# eas branch:view [branch-name]', '', '', '# Example', 'eas branch:view production']}
/>

The output of this command will show us a list of updates and their runtime versions and platforms. From this list, we should be able to figure out which update should apply to a given build, by matching the build's runtime version and platform to update's runtime version and platform. The most recent update that is compatible will be available for a build to download and execute.

### Verify the update command

To create and publish an update, we can run the following command:

<Terminal cmd={['$ eas update']} />

After publishing, the output will display the branch and the runtime version. This info can help us verify that we're creating an update with the configuration we expect.

### Viewing deployments

If we've made builds and updates with EAS, we can view the state of our project on our website on our project's deployments tab. We use the term _deployments_ to refer to the entire system of builds and their updates. The system includes builds, channels, branches, updates, runtime versions, and platforms.

The EAS website has a page that shows the current state of our apps. We can view it at [https://expo.dev/accounts/[account]/projects/[project]/deployments](https://expo.dev/accounts/[account]/projects/[project]/deployments).

## Next steps

Read the [advanced guide](/eas-update/debug-advanced) to debug EAS Update when the basic steps don't work.
