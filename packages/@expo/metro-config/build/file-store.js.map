{"version":3,"file":"file-store.js","names":["_FileStore","data","_interopRequireDefault","require","obj","__esModule","default","debug","ExpoMetroFileStore","FileStore","set","key","value","_value$output","_value$output$","_value$output$$data","src","output","code","match","exports"],"sources":["../src/file-store.ts"],"sourcesContent":["import FileStore from 'metro-cache/src/stores/FileStore';\n\nconst debug = require('debug')('expo:metro:cache') as typeof console.log;\n\nexport class ExpoMetroFileStore<T> extends FileStore<T> {\n  async set(key: Buffer, value: any): Promise<void> {\n    const src = value?.output?.[0]?.data?.code;\n    if (src) {\n      // Match `// @metro no-cache` or `/** @metro no-cache`\n      if (src.match(/^(?:[\\s\\t]+)(?:\\/\\/|\\/[*]+)(?:[\\s\\t]+)?@metro\\s(?:[\\s\\t]+)?no-cache/m)) {\n        debug('Skipping caching');\n        return;\n      }\n    }\n    return await super.set(key, value);\n  }\n}\n"],"mappings":";;;;;;AAAA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAyD,SAAAC,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEzD,MAAMG,KAAK,GAAGJ,OAAO,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAuB;AAEjE,MAAMK,kBAAkB,SAAYC,oBAAS,CAAI;EACtD,MAAMC,GAAGA,CAACC,GAAW,EAAEC,KAAU,EAAiB;IAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,mBAAA;IAChD,MAAMC,GAAG,GAAGJ,KAAK,aAALA,KAAK,wBAAAC,aAAA,GAALD,KAAK,CAAEK,MAAM,cAAAJ,aAAA,wBAAAC,cAAA,GAAbD,aAAA,CAAgB,CAAC,CAAC,cAAAC,cAAA,wBAAAC,mBAAA,GAAlBD,cAAA,CAAoBb,IAAI,cAAAc,mBAAA,uBAAxBA,mBAAA,CAA0BG,IAAI;IAC1C,IAAIF,GAAG,EAAE;MACP;MACA,IAAIA,GAAG,CAACG,KAAK,CAAC,sEAAsE,CAAC,EAAE;QACrFZ,KAAK,CAAC,kBAAkB,CAAC;QACzB;MACF;IACF;IACA,OAAO,MAAM,KAAK,CAACG,GAAG,CAACC,GAAG,EAAEC,KAAK,CAAC;EACpC;AACF;AAACQ,OAAA,CAAAZ,kBAAA,GAAAA,kBAAA"}