{"version":3,"names":["_ScrollView","_interopRequireDefault","require","_View","_openFileInEditor","_StyleSheet","_Text","_Platform","LogBoxData","_interopRequireWildcard","_AnsiHighlight","_LogBoxButton","_LogBoxInspectorSection","LogBoxStyle","React","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","LogBoxInspectorCodeFrame","props","codeFrame","getFileName","matches","exec","fileName","length","getLocation","location","row","column","jsx","heading","action","AppInfo","children","jsxs","style","styles","box","frame","horizontal","content","text","backgroundColor","pressed","getBackgroundDarkColor","button","onPress","_codeFrame$location$r","_codeFrame$location","openFileInEditor","fileText","appInfo","getAppInfo","getBackgroundColor","appInfoStyles","buildButton","appVersion","engine","StyleSheet","create","color","getTextColor","fontSize","lineHeight","flex","flexGrow","paddingVertical","paddingHorizontal","borderRadius","marginRight","marginLeft","marginTop","padding","borderBottomColor","borderBottomWidth","paddingTop","paddingBottom","includeFontPadding","fontFamily","Platform","select","android","ios","textAlign","_default","exports"],"sources":["LogBoxInspectorCodeFrame.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {CodeFrame} from '../Data/parseLogBoxLog';\n\nimport ScrollView from '../../Components/ScrollView/ScrollView';\nimport View from '../../Components/View/View';\nimport openFileInEditor from '../../Core/Devtools/openFileInEditor';\nimport StyleSheet from '../../StyleSheet/StyleSheet';\nimport Text from '../../Text/Text';\nimport Platform from '../../Utilities/Platform';\nimport * as LogBoxData from '../Data/LogBoxData';\nimport AnsiHighlight from './AnsiHighlight';\nimport LogBoxButton from './LogBoxButton';\nimport LogBoxInspectorSection from './LogBoxInspectorSection';\nimport * as LogBoxStyle from './LogBoxStyle';\nimport * as React from 'react';\ntype Props = $ReadOnly<{|\n  codeFrame: ?CodeFrame,\n|}>;\n\nfunction LogBoxInspectorCodeFrame(props: Props): React.Node {\n  const codeFrame = props.codeFrame;\n  if (codeFrame == null) {\n    return null;\n  }\n\n  function getFileName() {\n    // $FlowFixMe[incompatible-use]\n    const matches = /[^/]*$/.exec(codeFrame.fileName);\n    if (matches && matches.length > 0) {\n      return matches[0];\n    }\n\n    // $FlowFixMe[incompatible-use]\n    return codeFrame.fileName;\n  }\n\n  function getLocation() {\n    // $FlowFixMe[incompatible-use]\n    const location = codeFrame.location;\n    if (location != null) {\n      return ` (${location.row}:${\n        location.column + 1 /* Code frame columns are zero indexed */\n      })`;\n    }\n\n    return null;\n  }\n\n  return (\n    <LogBoxInspectorSection heading=\"Source\" action={<AppInfo />}>\n      <View style={styles.box}>\n        <View style={styles.frame}>\n          <ScrollView horizontal>\n            <AnsiHighlight style={styles.content} text={codeFrame.content} />\n          </ScrollView>\n        </View>\n        <LogBoxButton\n          backgroundColor={{\n            default: 'transparent',\n            pressed: LogBoxStyle.getBackgroundDarkColor(1),\n          }}\n          style={styles.button}\n          onPress={() => {\n            openFileInEditor(codeFrame.fileName, codeFrame.location?.row ?? 0);\n          }}>\n          <Text style={styles.fileText}>\n            {getFileName()}\n            {getLocation()}\n          </Text>\n        </LogBoxButton>\n      </View>\n    </LogBoxInspectorSection>\n  );\n}\n\nfunction AppInfo() {\n  const appInfo = LogBoxData.getAppInfo();\n  if (appInfo == null) {\n    return null;\n  }\n\n  return (\n    <LogBoxButton\n      backgroundColor={{\n        default: 'transparent',\n        pressed: appInfo.onPress\n          ? LogBoxStyle.getBackgroundColor(1)\n          : 'transparent',\n      }}\n      style={appInfoStyles.buildButton}\n      onPress={appInfo.onPress}>\n      <Text style={appInfoStyles.text}>\n        {appInfo.appVersion} ({appInfo.engine})\n      </Text>\n    </LogBoxButton>\n  );\n}\n\nconst appInfoStyles = StyleSheet.create({\n  text: {\n    color: LogBoxStyle.getTextColor(0.4),\n    fontSize: 12,\n    lineHeight: 12,\n  },\n  buildButton: {\n    flex: 0,\n    flexGrow: 0,\n    paddingVertical: 4,\n    paddingHorizontal: 5,\n    borderRadius: 5,\n    marginRight: -8,\n  },\n});\n\nconst styles = StyleSheet.create({\n  box: {\n    backgroundColor: LogBoxStyle.getBackgroundColor(),\n    marginLeft: 10,\n    marginRight: 10,\n    marginTop: 5,\n    borderRadius: 3,\n  },\n  frame: {\n    padding: 10,\n    borderBottomColor: LogBoxStyle.getTextColor(0.1),\n    borderBottomWidth: 1,\n  },\n  button: {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  content: {\n    color: LogBoxStyle.getTextColor(1),\n    fontSize: 12,\n    includeFontPadding: false,\n    lineHeight: 20,\n    fontFamily: Platform.select({android: 'monospace', ios: 'Menlo'}),\n  },\n  fileText: {\n    color: LogBoxStyle.getTextColor(0.5),\n    textAlign: 'center',\n    flex: 1,\n    fontSize: 12,\n    includeFontPadding: false,\n    lineHeight: 16,\n    fontFamily: Platform.select({android: 'monospace', ios: 'Menlo'}),\n  },\n});\n\nexport default LogBoxInspectorCodeFrame;\n"],"mappings":"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"}