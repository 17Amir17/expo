{"version":3,"file":"runtime.js","sourceRoot":"","sources":["../../src/rsc/runtime.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright Â© 2023 650 Industries.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst CLIENT_REFERENCE = Symbol.for('react.client.reference');\nconst SERVER_REFERENCE = Symbol.for('react.server.reference');\nconst PROMISE_PROTOTYPE = Promise.prototype;\n\nconst deepProxyHandlers = {\n  get: function (target: any, name: string, _receiver: any) {\n    switch (name) {\n      // These names are read by the Flight runtime if you end up using the exports object.\n      case '$$typeof':\n        // These names are a little too common. We should probably have a way to\n        // have the Flight runtime extract the inner target instead.\n        return target.$$typeof;\n      case '$$id':\n        return target.$$id;\n      case '$$async':\n        return target.$$async;\n      case 'name':\n        return target.name;\n      case 'displayName':\n        return undefined;\n      // We need to special case this because createElement reads it if we pass this\n      // reference.\n      case 'defaultProps':\n        return undefined;\n      // Avoid this attempting to be serialized.\n      case 'toJSON':\n        return undefined;\n      case Symbol.toPrimitive.toString():\n        // $FlowFixMe[prop-missing]\n        return Object.prototype[Symbol.toPrimitive];\n      case 'Provider':\n        throw new Error(\n          `Cannot render a Client Context Provider on the Server. ` +\n            `Instead, you can export a Client Component wrapper ` +\n            `that itself renders a Client Context Provider.`\n        );\n      default:\n        break;\n    }\n    // eslint-disable-next-line react-internal/safe-string-coercion\n    const expression = String(target.name) + '.' + String(name);\n    throw new Error(\n      `Cannot access ${expression} on the server. ` +\n        'You cannot dot into a client module from a server component. ' +\n        'You can only pass the imported name through.'\n    );\n  },\n  set: function () {\n    throw new Error('Cannot assign to a client module from a server module.');\n  },\n};\n\nconst proxyHandlers: any = {\n  get: function (\n    target: Function & {\n      $$typeof?: string;\n      $$id?: string;\n      $$async?: boolean;\n      default?: any;\n      status?: string;\n      value?: any;\n      then?: any;\n    },\n    name: string,\n    _receiver: any\n  ): any {\n    switch (name) {\n      // These names are read by the Flight runtime if you end up using the exports object.\n      case '$$typeof':\n        return target.$$typeof;\n      case '$$id':\n        return target.$$id;\n      case '$$async':\n        return target.$$async;\n      case 'name':\n        return target.name;\n      // We need to special case this because createElement reads it if we pass this\n      // reference.\n      case 'defaultProps':\n        return undefined;\n      // Avoid this attempting to be serialized.\n      case 'toJSON':\n        return undefined;\n      case Symbol.toPrimitive.toString():\n        // $FlowFixMe[prop-missing]\n        return Object.prototype[Symbol.toPrimitive];\n      case '__esModule':\n        // Something is conditionally checking which export to use. We'll pretend to be\n        // an ESM compat module but then we'll check again on the client.\n        const moduleId = target.$$id;\n        target.default = Object.defineProperties(\n          function () {\n            throw new Error(\n              `Attempted to call the default export of ${moduleId} from the server ` +\n                `but it's on the client. It's not possible to invoke a client function from ` +\n                `the server, it can only be rendered as a Component or passed to props of a ` +\n                `Client Component.`\n            );\n          },\n          {\n            $$typeof: { value: CLIENT_REFERENCE },\n            // This a placeholder value that tells the client to conditionally use the\n            // whole object or just the default export.\n            $$id: { value: target.$$id + '#' },\n            $$async: { value: target.$$async },\n          }\n        );\n        return true;\n      case 'then':\n        if (target.then) {\n          // Use a cached value\n          return target.then;\n        }\n        if (!target.$$async) {\n          // If this module is expected to return a Promise (such as an AsyncModule) then\n          // we should resolve that with a client reference that unwraps the Promise on\n          // the client.\n\n          const clientReference = Object.defineProperties(\n            {},\n            {\n              $$typeof: { value: CLIENT_REFERENCE },\n              $$id: { value: target.$$id },\n              $$async: { value: true },\n            }\n          );\n          const proxy = new Proxy(clientReference, proxyHandlers);\n\n          // Treat this as a resolved Promise for React's use()\n          target.status = 'fulfilled';\n          target.value = proxy;\n\n          const then = (target.then = Object.defineProperties(\n            function then(resolve, _reject) {\n              // Expose to React.\n              return Promise.resolve(\n                // $FlowFixMe[incompatible-call] found when upgrading Flow\n                resolve(proxy)\n              );\n            },\n            // If this is not used as a Promise but is treated as a reference to a `.then`\n            // export then we should treat it as a reference to that name.\n            {\n              $$typeof: { value: CLIENT_REFERENCE },\n              $$id: { value: target.$$id },\n              $$async: { value: false },\n            }\n          ));\n          return then;\n        } else {\n          // Since typeof .then === 'function' is a feature test we'd continue recursing\n          // indefinitely if we return a function. Instead, we return an object reference\n          // if we check further.\n          return undefined;\n        }\n      default:\n        break;\n    }\n    let cachedReference = target[name];\n    if (!cachedReference) {\n      const reference = Object.defineProperties(\n        function () {\n          throw new Error(\n            // eslint-disable-next-line react-internal/safe-string-coercion\n            `Attempted to call ${String(name)}() from the server but ${String(\n              name\n            )} is on the client. ` +\n              `It's not possible to invoke a client function from the server, it can ` +\n              `only be rendered as a Component or passed to props of a Client Component.`\n          );\n        },\n        {\n          $$typeof: { value: CLIENT_REFERENCE },\n          $$id: { value: target.$$id + '#' + name },\n          $$async: { value: target.$$async },\n        }\n      );\n      cachedReference = target[name] = new Proxy(reference, deepProxyHandlers);\n    }\n    return cachedReference;\n  },\n  getPrototypeOf(_target: Function): any {\n    // Pretend to be a Promise in case anyone asks.\n    return PROMISE_PROTOTYPE;\n  },\n  set: function () {\n    throw new Error('Cannot assign to a client module from a server module.');\n  },\n};\n\nexport function createClientReference(moduleId: string, name: string): any {\n  const clientReference = Object.defineProperties(\n    {},\n    {\n      $$typeof: { value: CLIENT_REFERENCE },\n      // Represents the whole Module object instead of a particular import.\n      $$id: { value: `${moduleId}#${name}` },\n      $$async: { value: false },\n    }\n  );\n  return new Proxy(clientReference, proxyHandlers);\n}\n\nexport function createServerReference(fn: Function, moduleId: string, name: string): Function {\n  const serverReference = Object.defineProperties(fn, {\n    $$typeof: { value: SERVER_REFERENCE },\n    // Represents the whole Module object instead of a particular import.\n    $$id: { value: `${moduleId}#${name}` },\n    $$bound: { value: null },\n  });\n  return serverReference;\n}\n"]}