{"version":3,"file":"routes-manifest.js","sourceRoot":"","sources":["../src/routes-manifest.ts"],"names":[],"mappings":";;;AAAA,0CAA0C;AAC1C,sBAAsB;AACtB,2CAAyD;AACzD,2DAAwD;AACxD,wDAAsE;AAgBtE,SAAS,uBAAuB,CAAC,MAAgB,EAAE;IACjD,MAAM,aAAa,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,OAAO,KAAI,CAAC,EAAE,CAAC,CAAC;IAElD,MAAM,CAAC,cAAc,CAAC,aAAa,EAAE,MAAM,EAAE;QAC3C,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG;KACjB,CAAC,CAAC;IAEH,OAAO,aAA+B,CAAC;AACzC,CAAC;AAED,SAAgB,oBAAoB,CAAC,KAAe;IAClD,mCAAmC;IACnC,MAAM,SAAS,GACb,OAAO,CAAC,GAAG,CAAC,+BAA+B;QAC3C,OAAO,CAAC,GAAG,CAAC,wCAAwC;QAClD,CAAC,CAAC,qBAAa;QACf,CAAC,CAAC,qBAAa,CAAC;IAEpB,MAAM,SAAS,GAAG,SAAS,CAAC,uBAAuB,CAAC,KAAK,CAAC,EAAE;QAC1D,iBAAiB,EAAE,IAAI;QACvB,mBAAmB,EAAE,IAAI;QACzB,iBAAiB,EAAE,IAAI;QACvB,2BAA2B,EAAE,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC;KAC3F,CAAC,CAAC;IAEH,IAAI,CAAC,SAAS,EAAE;QACd,OAAO,IAAI,CAAC;KACb;IACD,OAAO,IAAA,qCAAiB,EAAC,SAAS,CAAC,CAAC;AACtC,CAAC;AAnBD,oDAmBC","sourcesContent":["// This file runs in Node.js environments.\n// no relative imports\nimport { getRoutes as old_getRoutes } from './getRoutes';\nimport { getServerManifest } from './getServerManifest';\nimport { getRoutes as new_getRoutes } from './global-state/getRoutes';\nimport { RequireContext } from './types';\n\nexport type RouteInfo<TRegex = string> = {\n  file: string;\n  page: string;\n  namedRegex: TRegex;\n  routeKeys: { [named: string]: string };\n};\n\nexport type ExpoRoutesManifestV1<TRegex = string> = {\n  apiRoutes: RouteInfo<TRegex>[];\n  htmlRoutes: RouteInfo<TRegex>[];\n  notFoundRoutes: RouteInfo<TRegex>[];\n};\n\nfunction createMockContextModule(map: string[] = []) {\n  const contextModule = (key) => ({ default() {} });\n\n  Object.defineProperty(contextModule, 'keys', {\n    value: () => map,\n  });\n\n  return contextModule as RequireContext;\n}\n\nexport function createRoutesManifest(paths: string[]): ExpoRoutesManifestV1 | null {\n  // TODO: Drop this part for Node.js\n  const getRoutes =\n    process.env.EXPO_ROUTER_UNSTABLE_GET_ROUTES ||\n    process.env.EXPO_ROUTER_UNSTABLE_PLATFORM_EXTENSIONS\n      ? new_getRoutes\n      : old_getRoutes;\n\n  const routeTree = getRoutes(createMockContextModule(paths), {\n    preserveApiRoutes: true,\n    ignoreRequireErrors: true,\n    ignoreEntryPoints: true,\n    unstable_platformExtensions: Boolean(process.env.EXPO_ROUTER_UNSTABLE_PLATFORM_EXTENSIONS),\n  });\n\n  if (!routeTree) {\n    return null;\n  }\n  return getServerManifest(routeTree);\n}\n"]}